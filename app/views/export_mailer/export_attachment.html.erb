<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seating Chart Export</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #1f2937; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background: #f9f9f9; }
    .details { background: white; padding: 15px; border-radius: 6px; margin: 15px 0; }
    .footer { text-align: center; color: #666; font-size: 12px; margin-top: 30px; }
    .attachment-notice { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; padding: 12px; border-radius: 6px; margin: 15px 0; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Seating Chart Export</h1>
    </div>
    
    <div class="content">
      <p>Hello,</p>
      
      <p><%= @user.name || @user.email %> has shared a seating chart export with you.</p>
      
      <div class="details">
        <h3>Event Details</h3>
        <ul>
          <li><strong>Event:</strong> <%= @seating_arrangement.seating_event.name %></li>
          <% if @seating_arrangement.multi_day? %>
            <li><strong>Day:</strong> <%= @seating_arrangement.day_name %></li>
          <% end %>
          <li><strong>Date:</strong> <%= @seating_arrangement.seating_event.event_date.strftime('%B %d, %Y') %></li>
          <li><strong>Students:</strong> <%= @seating_arrangement.students_count %></li>
          <li><strong>Tables:</strong> <%= @seating_arrangement.tables_count %></li>
          <li><strong>Optimization Score:</strong> <%= @seating_arrangement.formatted_score %></li>
        </ul>
      </div>
      
      <div class="attachment-notice">
        <strong>ðŸ“Ž Attachment Included</strong><br>
        The seating chart export (<%= @format %> format) is attached to this email. Look for the file attachment in your email client.
      </div>
      
      <% if @seating_arrangement.has_explanations? %>
        <p><strong>Note:</strong> This seating arrangement includes AI-generated explanations for the seating decisions, providing insights into the optimization process.</p>
      <% end %>
      
      <p>If you have any questions about this seating arrangement or need the export in a different format, please contact <%= @user.email %>.</p>
      
      <p>Best regards,<br>
      CHDS Seating Charter System</p>
    </div>
    
    <div class="footer">
      <p>This export was generated by CHDS Seating Charter on <%= Time.current.strftime('%B %d, %Y') %>.</p>
    </div>
  </div>
</body>
</html>